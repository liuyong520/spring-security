function validateForm(){var e=$('#invite-form input:not(input[type="hidden"])'),i=!0;return $(e).each(function(e,t){var n=function(e){$("#"+e).closest(".form-group").removeClass("has-success").addClass("has-error"),$("#"+e).focus(),i=!1},o=function(e){$("#"+e).closest(".form-group").removeClass("has-error"),$("#"+e).parent().find(".error").remove()},a=$(t).attr("id");""==$(t).val()?n(a):"phone-input"==$(t).attr("class")?$(t).intlTelInput("isValidNumber")?o(a):n(a):o(a)}),i}function send_invite(){if(!validateForm())return!1;$.ajax({url:"/send_invite",type:"post",dataType:"json",data:{_token:$('[name="_token"]').val(),first_name:$("#first_name").val(),last_name:$("#last_name").val(),phone:$(".phone-input").intlTelInput("getNumber")},success:function(e){console.log(e),200==e.status&&new PNotify({title:"Info",text:"Invite sent",type:"info"})}})}function send_invite_email(){var e,i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t=[],n=!1;if((e=(e=$("#bulk_email").val().replace(/(?:\r\n|\r|\n)/g,";")).split(";")).length>0&&$.each(e,function(e,o){var a=o.split(",");""!==$.trim(a[0])&&$.trim(a[1])&&i.test($.trim(a[1]))&&(t.push({name:$.trim(a[0]),email:$.trim(a[1]),product_id:a[2]?$.trim(a[2]):""}),n=!0)}),1!=n)return $("#bulk_email").focus(),!1;$("#send_invite_email").addClass("loading"),$.ajax({url:"/send_bulk_email",type:"post",dataType:"json",data:{_token:$('[name="_token"]').val(),bulk_emails:t},success:function(e){console.log(e),200==e.status&&($("#send_invite_email").removeClass("loading"),new PNotify({title:"Info",text:e.message,type:"info"}))}})}function limitTextarea(e,i){var t,n=$(e).val().replace(/\r/g,"").split("\n");i&&n.length>i&&(n=n.slice(0,i),t=1),t&&e.val(n.join("\n"))}function show_dispute(){alert("dispute")}if($().ready(function(){price_slider_callback()}),$(document).on("change","#price-slider",function(e){e.preventDefault(),price_slider_callback()}),window.price_slider_callback=function(){var e="1";1==$("#price-slider").is(":checked")&&(e="2"),$(".pricing-container .pricing-price-value.active").removeClass("active"),$(".pricing-container .price_container-period_"+e).addClass("active"),$(".pricing-container .pricing-checkout-button.active").removeClass("active"),$(".pricing-container .checkout_container-period_"+e).addClass("active"),$(this).prop("checked")?($("#pricing").removeClass("monthly-pr"),$("#pricing").addClass("yearly-pr")):($("#pricing").removeClass("yearly-pr"),$("#pricing").addClass("monthly-pr"))},$("#price-slider").length>0&&$(document).on("change","#price-slider",function(e){}),$("#send_invite").on("click",function(e){return e.preventDefault(),send_invite(),console.log("testss"),!1}),$("#bulk_email").on("keyup",function(e){limitTextarea($(this),$(this).data("maxrows"))}),$("#send_invite_email").on("click",function(e){return e.preventDefault(),!$(this).hasClass("loading")&&(send_invite_email(),!1)}),$(document).on("click",".upload-logo",function(e){e.preventDefault(),$("#logo-file").click()}),$(document).on("change","#logo-file",function(e){e.preventDefault(),$.ajax({url:"/upload_campaign_logo",data:new FormData($("#company-form")[0]),dataType:"json",async:!1,type:"post",processData:!1,contentType:!1,success:function(e){console.log(e),200==e.status&&($("#uploaded-logo-path").val(e.file),$("#logo-file").val(""),new PNotify({title:"Info",text:"Logo uploaded",type:"info"}))}})}),$("#copy-url").length>0){var clipboard=new Clipboard("#copy-url");clipboard.on("success",function(e){new PNotify({title:"Invite Info",text:"Link copied to clipboard",type:"info"}),e.clearSelection()})}function playVideo(e){$(e).parent().addClass("played"),e.controls=!0,e.play()}$(".phone-input").length>0&&$(".phone-input").intlTelInput({nationalMode:!0,initialCountry:"us",utilsScript:"/theme/vendor/intl-tel-input/js/utils.js"}),$(".socials").length>0&&$(".socials").wdsharer({button:{twitter:!0,linkedin:!0,google:!0,facebook:!0},title:$(".socials").data("wdsharer-title"),description:$(".socials").data("wdsharer-desc")}),$(".btn-dispute").length>0&&($(".btn-dispute").on("click",function(){$("#dispute-review-id").val($(this).data("review-id"))}),$(".btn-dispute").magnificPopup({type:"inline",preloader:!1,focus:"#reason",modal:!0,callbacks:{beforeOpen:function(){$(window).width()<700?this.st.focus=!1:this.st.focus="#reason"}}})),$(".btn-remove-media").on("click",function(){$("#remove-media-review-id").val($(this).data("review-id"))}),$(".btn-remove-media").magnificPopup({type:"inline",preloader:!1,focus:"#reason",modal:!0,callbacks:{beforeOpen:function(){$(window).width()<700?this.st.focus=!1:this.st.focus="#reason"}}}),$(document).on("click","#modalRemoveMedia .modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()}),$(document).on("click","#modalRemoveMedia .modal-confirm",function(e){e.preventDefault(),$.magnificPopup.close(),$.ajax({url:"/myreviews/remove-media",type:"post",dataType:"json",data:{_token:$('[name="_token"]').val(),review_id:$("#remove-media-review-id").val()},success:function(e){200==e.status&&document.location.reload()},error:function(e){new PNotify({title:"Review Info",text:e.msg,type:"error"})}})}),$(".modal-popup-self").on("click",function(){"trial_expired"==$(this).data("var1")?$("#modalSubscription_tile").html("Your trial period expired, please upgrade"):$("#modalSubscription_tile").html("Your Subscription expired, please upgrade")}),$(".modal-popup-self").magnificPopup({type:"inline",preloader:!1,focus:"#reason",modal:!0,callbacks:{beforeOpen:function(){$(window).width()<700?this.st.focus=!1:this.st.focus="#reason"}}}),$(document).on("click","#modalDispute .modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()}),$(document).on("click","#modalSubscription .modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()}),$(document).on("click","#modalDispute .modal-confirm",function(e){e.preventDefault(),$.magnificPopup.close(),$.ajax({url:"/myreviews/dispute",type:"post",dataType:"json",data:{_token:$('[name="_token"]').val(),review_id:$("#dispute-review-id").val(),reason:$("#dispute-reason").val(),message:$("#dispute-message").val()},success:function(e){if(200==e.status){var i=$(".btn-dispute-"+$("#dispute-review-id").val()).parent();$(i).empty(),$(i).append("<span>REMOVED</span>"),new PNotify({title:"Review Info",text:"Review is removed",type:"info"})}},error:function(e){new PNotify({title:"Review Info",text:e.msg,type:"error"})}})}),$(document).on("click",".review-item .video-container .play-video",function(){playVideo($(this).parent().get(0).querySelector(".uploaded-video"))}),$(document).ready(function(){$(window).width()<768&&$("ul.pagination").each(function(){var e=0,i=parseInt($(this).find("li.active").text());$(this).find("li").each(function(){var i=$(this).text();i.match(/^[0-9]+$/)&&(i=parseInt(i),e<i&&(e=i))}),$(this).find("li").each(function(){var t=$(this).text();t.match(/^[0-9]+$/)?((t=parseInt(t))>1&&t<i-1&&$(this).hide(),t<e&&t>i+1&&$(this).hide()):"..."==t&&$(this).hide()})})});
